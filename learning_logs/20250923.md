# ì…ì‹¤ ì²´í¬ í•´ì£¼ì„¸ìš” !! ğŸ’Œ
1. visual studio codeë¡œ .md íŒŒì¼
2. intellijë¡œ ì½”ë“œ ì‘ì„±ìœ¼ë¡œ í•˜ê² ìŠµë‹ˆë‹¤.

# SpringBoot Project ìƒì„±
https://start.spring.io
Gradle - Groovy
Java
3.5.6
Artifact com.example.cardatabase
Jar
17

ê·¸ë¦¬ê³  Add Dependencies click
Spring Web
Spring Boot Dev tools
Lombok
Spring Data JPA

SpringBootì˜ ê°„ë‹¨ ì„¤ëª…
Entityì˜ ê°œë…
JPAê°€ ê·¸ë˜ì„œ Entityì™€ ì–´ë–»ê²Œ ì—°ê²°ë˜ì–´ìˆê³ , inmemory databaseì¸ h2ì™€ ì–´ë–»ê²Œ ì—°ê²°ì´ ë˜ëŠ”ì§€ ì—¬ë¶€ë„ ìˆ˜ì—….
build.gradle / application.propertiesë¼ê³  í•˜ëŠ” íŒŒì¼ë“¤ì— ëª…ë ¹ì–´ë“¤ì„ ì‘ì„±í•˜ê²Œ ëìŠµë‹ˆë‹¤.

Entity í´ë˜ìŠ¤ì˜ ê²½ìš°ì—ëŠ” DBì—ì„œì˜ table ì—­í• ì„ í•¨.
Entity í´ë˜ìŠ¤ì˜ fieldë“¤ì€ column ì—­í• ì„ í•¨.
JPAì™€ ì—°ë™ ë˜ì–´ìˆê¸° ë•Œë¬¸ì— í•„ìˆ˜ì ìœ¼ë¡œ ê¸°ë³¸ ìƒì„±ìë¥¼ ìš”êµ¬í•¨.
idê°’ì„ AUTOë¡œ ì¡ì•„ë†¨ê¸° ë•Œë¬¸ì—(ì¦‰, ìƒì„±ë  ë•Œë§ˆë‹¤ dbì—ì„œ ê³ ìœ  idê°’ì„ ë¶€ì—¬í•˜ê¸° ë•Œë¬¸ì—)
@AllArgsConstructorë¥¼ ì ìš©í•˜ë©´ ì˜¤ë¥˜ê°€ ë°œìƒí•©ë‹ˆë‹¤.


Lombokì´ ì ìš©ë˜ì§€ ì•Šì•˜ì„ ë•Œì˜ ê¸°ë³¸ì ì¸ Entity classì˜ êµ¬ì¡°
```java
package com.example.cardatabase.domain;

import jakarta.persistence.Entity;
import jakarta.persistence.GeneratedValue;
import jakarta.persistence.GenerationType;
import jakarta.persistence.Id;
import lombok.NoArgsConstructor;

@Entity
public class Owner {
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long ownerId;
    
    private String firstName, lastName;
    
    // Lombok ì‚¬ìš©í•˜ì§€ ì•Šê³ , ê¸°ë³¸ ìƒì„±ì ë° ownerIdë¥¼ ì œì™¸í•œ RequiredArgsConstructorë¥¼ ìƒì„±í•  ê²ƒ
    // Lombok ì‚¬ìš©í•˜ì§€ ì•Šê³ , ê° fieldì— ëŒ€í•œ getter setterë¥¼ ìƒì„±í•  ê²ƒ

    public Owner() {}

    public Owner(String firstName, String lastName) {
        this.firstName = firstName;
        this.lastName = lastName;
    }

    public Long getOwnerId() {
        return ownerId;
    }

    public void setOwnerId(Long ownerId) {
        this.ownerId = ownerId;
    }

    public String getFirstName() {
        return firstName;
    }

    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }

    public String getLastName() {
        return lastName;
    }

    public void setLastName(String lastName) {
        this.lastName = lastName;
    }
}
```

Lombokì´ ì ìš©ëœ Entity Classì˜ êµ¬ì¡°

```java
package com.example.cardatabase.domain;

import jakarta.persistence.Entity;
import jakarta.persistence.GeneratedValue;
import jakarta.persistence.GenerationType;
import jakarta.persistence.Id;
import lombok.*;

@Entity
@Getter
@Setter
@ToString
@NoArgsConstructor(force = true)
@RequiredArgsConstructor
public class Owner {
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long ownerId;

    private final String firstName;
    private final String lastName;
}
```
- `@NoArgsConstructor(force = true)` : final í•„ë“œê°€ ìˆëŠ” ê²½ìš°ì—ë„ í•´ë‹¹ í•„ë“œë¥¼ nullë¡œ ì´ˆê¸°í™”í•˜ëŠ” ìƒì„±ìë¥¼ ê°•ì œë¡œ ìƒì„±í•´ì£¼ê¸° ë•Œë¬¸ì— `final` í‚¤ì›Œë“œê°€ ë¶™ì€ ê²½ìš°ì—ë„ JPAì—ì„œ ìš”êµ¬ë˜ëŠ” ê¸°ë³¸ ìƒì„±ìë¥¼ ë§Œë“¤ ìˆ˜ ìˆê³ , `@RequiredArgsConstructor`ì™€ë„ ì¶©ëŒí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

http://localhost:8080/h2-console
ë“¤ì–´ê°€ì„œ ì¢Œì¸¡ í™•ì¸í•´ë³´ì‹œë©´ OWNER tableì´ ìƒì„±ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## í…Œì´ë¸” ê°„ì˜ ê´€ê³„ ì¶”ê°€
car í…Œì´ë¸”ê³¼ ì¼ëŒ€ë‹¤(1:N) ê´€ê³„ì— ìˆëŠ” ownerë¼ëŠ” ìƒˆ í…Œì´ë¸”ì„ ë§Œë“¤ê²ë‹ˆë‹¤. ì¼ëŒ€ë‹¤ ê´€ê³„ëŠ” ì†Œìœ ìê°€ í•œ ëª…ì´ ìë™ì°¨ ì—¬ëŸ¬ ëŒ€ë¥¼ ê°€ì§ˆ ìˆ˜ ìˆì§€ë§Œ, í•œ ìë™ì°¨ì˜ ì†Œìœ ìëŠ” í•œ ëª…ì´ë¼ëŠ” ì˜ë¯¸ì…ë‹ˆë‹¤.

domain íŒ¨í‚¤ì§€ì— Ownerì´ë¼ëŠ” ì—”í‹°í‹° í´ë˜ìŠ¤ì™€ OwnerRepositoryë¼ëŠ” repository ì¸í„°í˜ì´ìŠ¤ë¥¼ ë§Œë“¤ì–´ì•¼ í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  OwnerRepositoryëŠ” JpaReposiotryë¥¼ ìƒì† ë°›ì•„ì•¼ í•©ë‹ˆë‹¤.

ì´ìƒì˜ ì¼ëŒ€ë‹¤ ê´€ê³„ë¥¼ ì¶”ê°€í•˜ë ¤ë©´ `@ManyToOne`ê³¼ `@OneToMany` ì• ë„ˆí…Œì´ì…˜(jakarta.persistence)ì„ ì´ìš©í•´ì•¼ í•©ë‹ˆë‹¤. ì™¸ë˜ í‚¤ë¥¼ í¬í•¨í•œ Car ì—”í‹°í‹° í´ë˜ìŠ¤ì—ì„œëŠ” `@ManyToOne`ì„ ì‚¬ìš©í• ê²ë‹ˆë‹¤(ì´ê²ƒ ë•Œë¬¸ì— ìœ„ì— ë¶€ë¶„ ë³µì‚¬í•´ì™”ìŠµë‹ˆë‹¤). ê·¸ë¦¬ê³  ì™¸ë˜í‚¤ë¥¼ ì¶”ê°€í–ˆê¸° ë•Œë¬¸ì— field êµ¬ì„±ì´ ë‹¬ë¼ì ¸ì•¼ê² ì£ .

ê·¸ëŸ¼ DB ì ìœ¼ë¡œ ë´¤ì„ ë•ŒëŠ” car tableì—ë‹¤ê°€ ì™¸ë˜í‚¤ì¸ ownerIdë¥¼ ì¶”ê°€í•˜ëŠ” ê°œë…ì´ë¼ê³  ë³¼ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— Car entity classì—ëŠ” Owner ê´€ë ¨ fieldë¥¼ ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤. ê·¸ë ‡ë‹¤ë©´ ìƒˆë¡œ ì¶”ê°€ëœ fieldì— ëŒ€í•œ getter / setterë„ ìš”êµ¬ë ê²ë‹ˆë‹¤. ëª¨ë“  JOIN ê´€ê³„ì—ì„œëŠ” FetchType.LAZYë¥¼ ì´ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. ëŒ€ë‹¤(toMany) ê´€ê³„ì˜ ê²½ìš°ì—ëŠ” FetchType.LAZYê°€ ê¸°ë³¸ê°’ì´ë¯€ë¡œ ì •ì˜í•  í•„ìš”ê°€ ì—†ì§€ë§Œ ëŒ€ì¼(toOne) ê´€ê³„ì˜ ê²½ìš°ì—ëŠ” ë°˜ë“œì‹œ ëª…ì‹œí•´ì¤˜ì•¼ í•©ë‹ˆë‹¤.

FetchType : DBì—ì„œ ë°ì´í„°ë¥¼ ê²€ìƒ‰í•˜ëŠ” ì „ëµì„ ì •ì˜. ì†ì„±ê°’ìœ¼ë¡œëŠ”
  EAGER : ì¦‰ì‹œ ê²€ìƒ‰
  LAZY : ì§€ì—° ê²€ìƒ‰
ì €í¬ ì˜ˆì œì—ì„œëŠ” ì§€ì—° ê²€ìƒ‰(LAZY)ì€ DBì—ì„œ ì†Œìœ ìë¥¼ ê²€ìƒ‰í•˜ë©´ í•„ìš”í•  ë•Œ í•´ë‹¹ ì†Œìœ ìì™€ ì—°ê´€ëœ ëª¨ë“  ìë™ì°¨ë¥¼ ê²€ìƒ‰í•œë‹¤ëŠ” ì˜ë¯¸ì…ë‹ˆë‹¤. ë°˜ë©´ ì¦‰ì‹œ ê²€ìƒ‰(EAGER)ì€ í•´ë‹¹ ì†Œìœ ìì˜ ëª¨ë“  ìë™ì°¨ë¥¼ ì¦‰ì‹œ ê²€ìƒ‰í•©ë‹ˆë‹¤.

```java
// Car.java
{
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;
    private String brand, model, color, registrationNumber;
    private int modelYear, price;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "owner")
    private Owner owner;

    public Owner getOwner() {
        return owner;
    }

    public void setOwner(Owner owner) {
        this.owner = owner;
    }

    public Car(String brand, String model, String color, String registrationNumber, int modelYear, int price) {
        this.brand = brand;
        this.model = model;
        this.color = color;
        this.registrationNumber = registrationNumber;
        this.modelYear = modelYear;
        this.price = price;
    }
}
// Owner.java
package com.example.cardatabase.domain;

import jakarta.persistence.*;
import lombok.*;

import java.util.List;

@Entity
@Getter
@Setter
@ToString
@NoArgsConstructor(force = true)
@RequiredArgsConstructor
public class Owner {
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long ownerId;

    @NonNull
    private String firstName;
    @NonNull
    private String lastName;

    // ì†Œìœ ìëŠ” ë‹¤ìˆ˜ì˜ ì°¨ë“¤ì„ ê°€ì§ˆ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— Collectionsë¥¼ ì‚¬ìš©.
    @OneToMany(cascade = CascadeType.ALL, mappedBy = "owner")
    private List<Car> cars;
}
```
ì´ìƒì˜ ì½”ë“œì—ì„œ `@Data`ë¥¼ ë‹¬ì•„ë‘” ê²½ìš°ì— ì¼ë¶€ëŸ¬ ê²¹ì¹˜ì§€ë§Œ Ownerì™€ ê´€ë ¨ëœ getter / setterë¥¼ ì½”ë“œë¡œ ì¨ë‘ì—ˆìŠµë‹ˆë‹¤. ë°˜ë©´ì— `@Getter, @Setter`ë¥¼ ëª…ì‹œí•´ë‘” Owner í´ë˜ìŠ¤ì—ëŠ” cars ê´€ë ¨ getter/ setterë¥¼ ì•ˆ ì¼ìŠµë‹ˆë‹¤. ë‹¹ì—°íˆ í”„ë¡œì íŠ¸ í•˜ì‹¤ ë•ŒëŠ” setOwner() / getOwner()ë¥¼ ì½”ë“œë¡œ ì“°ì‹¤ í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤.

Owner classì˜ `@OneToMany` ì• ë„ˆí…Œì´ì…˜ì—ëŠ” íŠ¹ì„±ì´ ìˆìŠµë‹ˆë‹¤.
1. cascade ì†ì„±ì€ ì‚­ì œ / ì—…ë°ì´íŠ¸ ì‹œ ì—°ì† íš¨ê³¼ê°€ ì ìš©ë˜ëŠ” ë°©ë²•ì„ ì§€ì •í•©ë‹ˆë‹¤. 
  - ALLë¡œ ì„¤ì •í•˜ê²Œ ë˜ë©´ ëª¨ë“  ì‘ì—…ì´ ì—°ì†ì ìœ¼ë¡œ ì ìš©ë©ë‹ˆë‹¤.
  - ì˜ˆë¥¼ ë“¤ì–´ Ownerë¥¼ ì‚­ì œí•˜ê²Œ ë˜ë©´ ê·¸ ì†Œìœ ìì™€ ì—°ê²°ëœ Car ê°ì²´ë“¤ë„ ì „ë¶€ ë‹¤ ì‚­ì œë©ë‹ˆë‹¤.
2. mappedBy="owner" ì†ì„± ì„¤ì • : Car í´ë˜ìŠ¤ ì‚¬ì´ì— ì´ ê´€ê³„ì˜ ì™¸ë˜ í‚¤ì¸ owner í•„ë“œê°€ ì¡´ì¬í•¨ì„ ëª…ì‹œí•¨.

SQLì„ ë°°ìš´ ì €í¬ê°€ ì¢€ ì–´ìƒ‰í•˜ê²Œ ëŠê»´ì§ˆ ìˆ˜ ìˆëŠ” ê²ƒì€ ownerId í•„ë“œ í•˜ë‚˜ë§Œ ê°€ì§€ê³  ì™€ì„œ ì—°ê²°ì§“ëŠ”ê²Œ ì•„ë‹ˆë¼ Owner í´ë˜ìŠ¤ë¥¼ í†µì§¸ë¡œ ë“¤ê³ ì™€ì„œ Carì— fieldë¡œ ì‚¼ëŠ”ë‹¤ëŠ” ì ì…ë‹ˆë‹¤.

## H2 -> MariaDBë¡œ ì´ì‹
h2 versionì„ pushí•©ë‹ˆë‹¤.

git add .
git commit -m "feat: h2 ì¸ë©”ëª¨ë¦¬ ì„¤ì • ê´€ë ¨ ì½”ë“œ"
git push

build.gradleì— h2 ê´€ë ¨ ì˜ì¡´ì„± ìˆëŠ”ì§€ ì—¬ë¶€
application.propertiesì—ì„œ h2 ê´€ë ¨ìœ¼ë¡œ ì ‘ì†í•˜ëŠ”ì§€ ì—¬ë¶€ì…ë‹ˆë‹¤.

MariaDBë¡œ ë°”ê¾¼ë‹¤ëŠ” ë§ì€ build.gradel / application.properties ì„¤ì •ì„ ë°”ê¿€ê±°ë¼ëŠ” ì˜ë¯¸ê°€ ë˜ê² ë„¤ìš”.

1. HeidiSQLì—ì„œ ê´€ë ¨ DBë¥¼ ìƒì„±í•˜ê² ìŠµë‹ˆë‹¤..
2. ìƒˆ DB ìƒì„± -> cardb ì´ë¶€ë¶„ì´ application.propertiesì™€ ì¼ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤.
3. build.gradleì— MariaDB
  - mvn -> maridb
```java
dependencies {
	implementation 'org.springframework.boot:spring-boot-starter-web'
	implementation 'org.springframework.boot:spring-boot-starter-data-jpa'
	developmentOnly 'org.springframework.boot:spring-boot-devtools'
//	runtimeOnly 'com.h2database:h2'
    runtimeOnly 'org.mariadb.jdbc:mariadb-java-client'
	testImplementation 'org.springframework.boot:spring-boot-starter-test'

	implementation 'org.projectlombok:lombok:1.18.42'
	annotationProcessor 'org.projectlombok:lombok:1.18.42'
}
```
4. application.propertiesì— ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì •ì˜
```properties
spring.application.name=cardatabase
spring.datasource.url=jdbc:mariadb://localhost:3310/cardb
spring.datasource.username=root
spring.datasource.password=1234
spring.datasource.driver-class-name=org.mariadb.jdbc.Driver
spring.jpa.generate-ddl=true
spring.jpa.hibernate.ddl-auto=create-drop
```
spring.jpa.generate-ddl=true ì„¤ì •ì€ JPAê°€ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì´ˆê¸°í™”í•´ì•¼í•˜ëŠ”ì§€(true/false) ì—¬ë¶€ë¥¼ ì •ì˜í•©ë‹ˆë‹¤

spring.jpa.hibernate.ddl-auto=create-drop ì„¤ì •ì€ ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™”ì˜ ì‘ë™ì„ ì •ì˜. ì´ìš© ê°€ëŠ¥í•œ ê°’ì€ none / validate / update / create / create-dropìœ¼ë¡œ ê¸°ë³¸ê°’ì€ dbë§ˆë‹¤ ë‹¤ë¦…ë‹ˆë‹¤. h2ì¸ë©”ëª¨ë¦¬ì˜ ê²½ìš°ì—ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ create-dropì¸ë°, mariadbëŠ” noneì…ë‹ˆë‹¤.
  - create : ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì‹œì‘ë  ë•Œ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ìƒì„±í•˜ê¸°ë§Œ í•¨(ê·¸ë˜ì„œ createë¡œ í•´ë†“ê³  ë™ì¼í•œ í…Œì´ë¸”ëª… ì„¤ì •í•´ë‘ë©´ ì˜¤ë¥˜ë‚©ë‹ˆë‹¤).
  - update : ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ìƒì„±í•˜ê³  ìŠ¤í‚¤ë§ˆê°€ ë³€ê²½ë˜ë©´ ìˆ˜ì •.
  - create-drop : ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì‹œì‘ë ë•Œë§ˆë‹¤ dbë¥¼ ìƒì„±í•˜ê³  ì¤‘ì§€ë  ë•Œë§ˆë‹¤ ì‚­ì œ -> ê·¸ë˜ì„œ ì¦ì€ ë³€ê²½ì‚¬í•­ì´ ìˆëŠ” ê°œë°œ í™˜ê²½ì—ì„œëŠ” ì• ë¥¼ ì“°ëŠ”í¸ì…ë‹ˆë‹¤.

springboot í”„ë¡œì íŠ¸ ìƒì„±
entity class - repositoryì˜ ê´€ê³„ì„±(lombok ìœ ë¬´ì— ë”°ë¥¸ ì½”ë“œ ë¼ì¸ ë³€ê²½ ì‚¬í•­ ì‘ì„±)
mariadb ì´ì‹ê³¼ ê´€ë ¨ëœ ì„¤ì •

ì´ìƒê¹Œì§€ ì‘ì„±í—€ë‹¤ê³  ê°€ì •í—€ì„ ë•Œ, CarDatabaseApplicationì— CommandLineRunnerë¥¼ í™œìš©í•œ ë”ë¯¸ ë°ì´í„°ë¥¼ ë„£ëŠ” ê²ƒì´ ì¢€ ë²ˆê±°ë¡­ê²Œ ëŠê»´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì €í¬ëŠ” ì´ë¯¸ SQLë¬¸ì„ ë°°ì› ê³ , ê·¸ë ‡ë‹¤ë©´ ê³§ì¥ í…Œì´ë¸”ì— ê°’ì„ ë„£ì„ ìˆ˜ ìˆì„ ê²ƒ ê°™ìœ¼ë‹ˆê¹Œìš”.

ê·¼ë° create-drop ë•Œë¬¸ì— í•  ë•Œë§ˆë‹¤ ë‚ ë¼ê°€ì„œ ì¿¼ë¦¬ë¬¸ì„ ì§¸ë¡œ ë³µì‚¬í•´ë’€ë‹¤ê°€ ì‹¤í–‰í•  ë•Œë§ˆë‹¤ ë¶™ì—¬ë„£ìœ¼ì‹œë“ ì§€, ì•„ë‹ˆë©´ ê¸¸ê³  ê·€ì°®ì§€ë§Œ main ë¶€ë¶„ì— ì‘ì„±í•´ë‘ì‹œë“ ì§€ í•˜ì…”ì•¼ í•  ê²ë‹ˆë‹¤.

# RESTful API SpringBoot ver.

Spring Data RESTë¥¼ ì´ìš©í•˜ì—¬ CRUD ê¸°ëŠ¥ì„ ìë™ìœ¼ë¡œ ì œê³µí•˜ëŠ” RESTful ì›¹ ì„œë¹„ìŠ¤ë¥¼ ë§Œë“¤ê³ , ê·¸ê²ƒì„ OpenAPI 3(Swagger)ë¡œ API ëª…ì„¸ì„œë„ ë§Œë“¤ì–´ ë³¼ ì˜ˆì •ì…ë‹ˆë‹¤.

## REST ê¸°ì´ˆ

- ì›¹ ì„œë¹„ìŠ¤ë¥¼ ì œì‘í•˜ê¸° ìœ„í•œ ì•„í‚¤í…ì²˜ ìŠ¤íƒ€ì¼. Representational State Transferë¥¼ ëœ»í•˜ë©° íŠ¹ì • ì–¸ì–´ë‚˜ í”Œë«í¼ì— ë…ë¦½ì ì´ë©° ëª¨ë°”ì¼ ì•± / ê¸°íƒ€ ì„œë¹„ìŠ¤ì™€ ê°™ì€ ë‹¤ì–‘í•œ í´ë¼ì´ì–¸íŠ¸ë“¤ì´ ì„œë¡œ í†µì‹ í•  ìˆ˜ ìˆë„ë¡ í•¨.

- ê·¼ë° ì´ê²Œ ë§‰ ì •í•´ì§„ ê·œì¹™ì´ ìˆëŠ” í”„ë ˆì„ì›Œí¬ë¼ì„œ ê¼­ ì´ëŸ°ì‹ìœ¼ë¡œ ì‘ì„±í•˜ì„¸ìš”, ë¼ëŠ” ì˜ë¯¸ê°€ ì•„ë‹ˆë¼ ë¡œì´ í•„ë”©ì•Œê³  í•˜ëŠ” ê°œë°œìê°€ ì œì‹œí•œ ì œì•½ ì¡°ê±´ì˜ ì§‘í•©ì…ë‹ˆë‹¤. 

- RESTì˜ ì œì•½ ì¡°ê±´
  1. ìƒíƒœ ë¹„ì €ì¥ : ì„œë²„ëŠ” í´ë¼ì´ì–¸íŠ¸ ìƒíƒœì— ê´€í•œ ì–´ë–¤ ì •ë³´ë„ ì €ì¥í•˜ì§€ ì•ŠìŒ.
  2. í´ë¼ì´ì–¸íŠ¸-ì„œë²„ ê°„ì˜ ë…ë¦½ì„± : í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ëŠ” ë…ë¦½ì ìœ¼ë¡œ ì‘ë™í•´ì•¼ í•¨. ì„œë²„ëŠ” í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ ì—†ì´ ì–´ë– í•œ ì •ë³´ë„ ì „ì†¡í•´ì„œëŠ” ì•ˆëœë‹¤.
  3. ìºì‹œ ê¸°ëŠ¥ : ì—¬ëŸ¬ í´ë¼ì´ì–¸íŠ¸ê°€ ë™ì¼í•œ ë¦¬ì†ŒìŠ¤ë¥¼ ìš”ì²­í•˜ëŠ” ê²½ìš°ê°€ ë§ìœ¼ë¯€ë¡œ ì„±ëŠ¥ í–¥ìƒì„ ìœ„í•´ ë¦¬ì†ŒìŠ¤ì— ìºì‹±ì„ ì ìš©í•´ì•¼ í•¨.
  4. ì¼ê´€ëœ ì¸í„°í˜ì´ìŠ¤ : ì„œë¡œ ë‹¤ë¥¸ í´ë¼ì´ì–¸íŠ¸ì— ì˜í•œ ìš”ì²­ì´ë”ë¼ë„ ì‘ë‹µì€ ë™ì¼í•˜ê²Œ ë³´ì—¬ì•¼ í•¨. í´ë¼ì´ì–¸íŠ¸ì˜ ì˜ˆì‹œë¡œëŠ” ë¸Œë¼ìš°ì € / ìë°” ì• í”Œë¦¬ì¼€ì´ì…˜ / ëª¨ë°”ì¼ ì• í”Œë¦¬ì¼€ì´ì…˜ ë“±
  5. ê³„ì¸µí˜• ì‹œìŠ¤í…œ : ì „ì²´ ì„œë¹„ìŠ¤ì— ì˜í–¥ì„ ì£¼ì§€ ì•Šê³  êµ¬ì„± ìš”ì†Œë¥¼ ì¶”ê°€í•˜ê±°ë‚˜ ìˆ˜ì •í•  ìˆ˜ ìˆì–´ì•¼ í•¨. ì´ ì¡°ê±´ì€ í™•ì¥ì„±ê³¼ ê´€ë ¨ ìˆìŒ. ë‹¹ê·¼ ë§ˆì¼“ì— ê°‘ìê¸° ì§€ë„ ì¶”ê°€ë˜ê±°ë‚˜ í˜¹ì€ ì±„íŒ…ì´ ì¶”ê°€ë˜ê±°ë‚˜, ë˜í•œ ê°€ê²© ë³€ë™ì— ëŒ€í•œ ì•ŒëŒ ë“± ê¸°ëŠ¥ì´ ì¶”ê°€ë˜ë”ë¼ë„ ë‹¹ê·¼ ë§ˆì¼“ ìì²´ê°€ ë©ˆì¶”ì§€ ì•Šê² ì£ .
  6. ì£¼ë¬¸í˜• ì½”ë“œ : ì„ íƒ ì‚¬í•­ì— í•´ë‹¹í•˜ëŠ”ë°, ëŒ€ë¶€ë¶„ì˜ ì„œë²„ëŠ” ì •ì  ì»¨í…ì¸ ë¥¼ JSON ë˜ëŠ” XML í˜•ì‹ìœ¼ë¡œ ì „ì†¡í•œë‹¤. ì´ëŠ” ì„œë²„ê°€ ì •ì  ì»¨í…ì¸ ë§Œì´ ì•„ë‹ˆë¼ ì‹¤í–‰ ì½”ë“œë¥¼ ì „ì†¡í•  ìˆ˜ ìˆë„ë¡ í•¨.

- REST ì•„í‚¤í…ì²˜ì— í¬í•¨ë˜ë©´ ì¢‹ì€ ìš”ì†Œë“¤.
  1. ë¦¬ì†ŒìŠ¤ ì‹ë³„ : ë¦¬ì†ŒìŠ¤ëŠ” ê³ ìœ  ì‹ë³„ì(ì˜ˆë¥¼ ë“¤ë©´ REST ì„œë¹„ìŠ¤ì˜ URI)ë¡œ ì‹ë³„í•´ì•¼ í•¨. REST ë¦¬ì†ŒìŠ¤ëŠ” ì´í•´í•˜ê¸° ì‰¬ìš´ ë””ë ‰í† ë¦¬ êµ¬ì¡°ì˜ URIë¥¼ ë…¸ì¶œí•´ì•¼ í•¨. ê·¸ë˜ì„œ ì£¼ì†Œë¥¼ ë³´ì‹œë©´
  2. í‘œí˜„ì„ í†µí•œ ë¦¬ì†ŒìŠ¤ ì¡°ì‘ : ë¦¬ì†ŒìŠ¤ë¥¼ ìš”ì²­í•  ë•Œ ì„œë²„ëŠ” ë¦¬ì†ŒìŠ¤ì˜ í‘œí˜„ìœ¼ë¡œ ì‘ë‹µí•´ì•¼ í•¨. ì¼ë°˜ì ì¸ í‘œí˜„ í˜•ì‹ìœ¼ë¡œëŠ” JSON / XML
  3. ìì²´ì ì¸ ì„¤ëª… ë©”ì„¸ì§€ : ë©”ì‹œì§€ëŠ” ì„œë²„ê°€ ì²˜ë¦¬ ë°©ë²•ì„ ì•Œ ìˆ˜ ìˆëŠ” ì¶©ë¶„í•œ ì •ë³´ê°€ í¬í•¨ë˜ì–´ì•¼ í•¨.
  4. HATEOAS(Hypermedia As The Engine Of Application State) : ì‘ë‹µì—ëŠ” ì„œë¹„ìŠ¤ì˜ ë‹¤ë¥¸ ì˜ì—­ìœ¼ë¡œ ì—°ê²°ë˜ëŠ” ë§í¬ê°€ í¬í•¨ë˜ì–´ì•¼ í•¨.

## SpringBootë¡œ RESTful API ì›¹ ì„œë¹„ìŠ¤ ë§Œë“¤ê¸°
- ì´ì œ Controller í´ë˜ìŠ¤ê°€ í•„ìš”í•©ë‹ˆë‹¤. ControllerëŠ” ëª¨ë“  HTTP ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” í´ë˜ìŠ¤ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤.
- cardatabase íŒ¨í‚¤ì§€ì— webì´ë¼ëŠ” íŒ¨í‚¤ì§€ë¥¼ ìƒì„±.
- web íŒ¨í‚¤ì§€ ë‚´ì— CarControllerë¼ëŠ” Java íŒŒì¼ ìƒì„±

```java
package com.example.cardatabase.web;

import org.springframework.web.bind.annotation.RestController;

@RestController
public class CarController {
}
```
`@RestController` : í•´ë‹¹ í´ë˜ìŠ¤ê°€ RESTful API ì›¹ ì„œë¹„ìŠ¤ ìƒì˜ Controllerê°€ ë  ê²ƒì„ ì§€ì •í•¨.

- ë©”ì„œë“œë“¤ì´ í¬í•¨ë  ê²ë‹ˆë‹¤. Controller í´ë˜ìŠ¤ì˜ ë©”ì„œë“œì—ëŠ” ë©”ì„œë“œê°€ ë§¤í•‘ë˜ëŠ” ì—”íŠ¸í¬ì¸íŠ¸ë¥¼ ì •ì˜í•˜ëŠ” @RequestMapping ì—ë„ˆí…Œì´ì…˜ì„ ì§€ì •í• ê²ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ `/cars` ì—”ë“œí¬ì¸íŠ¸ë¡œ GET ìš”ì²­ì„ í•˜ê²Œ ë˜ì—ˆì„ ë•Œ getCars() ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ê²Œ í•  ê²ë‹ˆë‹¤.

```java
package com.example.cardatabase.web;

import com.example.cardatabase.domain.Car;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RestController;

@RestController
public class CarController {
    @GetMapping("/cars")
    public Iterable<Car> getCars() {
        //ìë™ì°¨ë¥¼ ê²€ìƒ‰í•˜ê³  ë°˜í™˜í• ê²ë‹ˆë‹¤.
    }
}
```
ì´ìƒì˜ ìƒíƒœì—ì„œ getCars() ë©”ì„œë“œëŠ” ëª¨ë“  ìë™ì°¨ ê°ì²´ë¥¼ ë°˜í™˜í•œ ë‹¤ìŒì— Jackson ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ì˜í•´ì„œ ìë™ìœ¼ë¡œ JSON ê°ì²´ë¡œ ë³€í™˜ë©ë‹ˆë‹¤.

ê·¸ë¦¬ê³  getCars() ë©”ì„œë“œëŠ” `@GetMapping` ì—ë„ˆí…Œì´ì…˜ì„ ì´ìš©í•˜ê¸° ë•Œë¬¸ì— `/cars` ì—”ë“œí¬ì¸íŠ¸ì˜ GET ìš”ì²­ë§Œ ì²˜ë¦¬í•©ë‹ˆë‹¤. ì¦‰ SQLë¬¸ ìƒì—ì„œì˜ SELECT ìš”ì²­ë§Œ ì²˜ë¦¬í•œë‹¤ëŠ” ì˜ë¯¸ì´ê² ë„¤ìš”. ë˜í•œ ê·¸ ë§ì€ `@PostMapping`ì—ì„œëŠ” SQLë¬¸ ìƒì—ì„œì˜ INSERT ìš”ì²­ë§Œ ì²˜ë¦¬í•œë‹¤ëŠ” ëœ»ì´ ë˜ê² ìŠµë‹ˆë‹¤. `@---Mapping`ë§Œ ë³´ê³ ì„œë„ ì–´ë–¤ ì—­í• ì„ í•˜ëŠ” methodì¸ì§€ ìš°ë¦¬ëŠ” ì¶”ì¸¨í•  ìˆ˜ê°€ ìˆê² ìŠµë‹ˆë‹¤.
`@PostMapping`
`@GetMapping`
`@DeleteMapping`
ë“±ì´ ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ POST / GET / DELETE ë“±ì„ HTTP ë©”ì„œë“œë¼ê³  í‘œí˜„í•©ë‹ˆë‹¤.

ê·¸ëŸ¬ë©´ ì¢€ ë¡œì§ì„ ìƒê°í•´ë³¼ í•„ìš”ê°€ ìˆê² ìŠµë‹ˆë‹¤. getCars()ë¥¼ í˜¸ì¶œí•œë‹¤ê³  í•  ë•Œ ìš°ë¦¬ëŠ” ì–´ë””ì—ì„œ ìë™ì°¨ ëª©ë¡ì„ ê°€ì§€ê³  ì˜¬ ìˆ˜ ìˆì„ì§€.

```java
package com.example.cardatabase.web;

import com.example.cardatabase.domain.Car;
import com.example.cardatabase.domain.CarRepository;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RestController;

@RestController
public class CarController {
    private final CarRepository carRepository;

    public CarController(CarRepository carRepository) {
        this.carRepository = carRepository;
    }

    @GetMapping("/cars")
    public Iterable<Car> getCars() {
        return carRepository.findAll();
    }
}
```
ë‹¹ì—°íˆ ìë™ì°¨ë“¤ì´ ì €ì¥ë˜ì–´ìˆëŠ” ê³³ì€ car í…Œì´ë¸”ì¼ê±°ë‹ˆê¹Œ, SELECT * FROM car;ë¥¼ í˜¸ì¶œ í•  ìˆ˜ ìˆëŠ” CarRepositoryê°€ í•„ìš”í•©ë‹ˆë‹¤.
ê·¸ë˜ì„œ Controllerì—ì„œ CarRepositoryë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ fieldë¡œ ì„ ì–¸í•˜ê³ , finalì„ ë¨¹ì—¬ì„œ CarControllerì— CarRepositoryê°€ í¬í•¨ë˜ì–´ìˆëŠ” ë§¤ê°œë³€ìˆ˜ ìƒì„±ìë¥¼ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë©´ CarControllerëŠ” carRepositoryì— ë”¸ë ¤ìˆëŠ” ë©”ì„œë“œì¸ .findAll(); ì„ í†µí•´ì„œ ì „ì²´ ìë™ì°¨ ëª©ë¡ì„ return í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.

í˜„ì¬ ìƒí™©ì—ì„œ ìƒê¸¸ ìˆ˜ ìˆëŠ” ë¬¸ì œë¥¼ ê²€í† í•˜ê² ìŠµë‹ˆë‹¤.
1. ìë™ì°¨ ëª©ë¡ì„ ë‹¤ ê°€ì§€ê³  ì˜µë‹ˆë‹¤.
2. ê·¼ë° ìë™ì°¨ ëª©ë¡ì˜ ê°ê°ì˜ field ë“¤ì—ëŠ” Ownerê°€ í¬í•¨ë˜ì–´ìˆìŠµë‹ˆë‹¤.
3. ê·¼ë° ê·¸ Ownerì—ëŠ” carsë¼ê³  í•˜ëŠ” field ê°€ ìˆìŠµë‹ˆë‹¤.
4. ê·¸ë¦¬ê³  ê·¸ cars List ë‚´ì—ëŠ” ê°ê°ì˜ elementë¡œ car ê°ì²´ë“¤ì´ ìˆìŠµë‹ˆë‹¤.
5. ê·¸ carì˜ ê°ì²´ì˜ fieldë¡œ Ownerê°€ í¬í•¨ë˜ì–´ìˆìŠµë‹ˆë‹¤.
6. ë¬´í•œ ë°˜ë³µ

ê·¸ë˜ì„œ Owner.javaì— `@JsonIgnoreProperties({"hibernateLazyInitializer", "handler"})`ì™€ cars í•„ë“œì— `@JsonIgnore`ë¥¼ ì ìš©í•˜ê²Œ ë˜ë©´ ë¬´í•œ ë°˜ë³µì„ ë¬´ì‹œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

localhost:8080/cars

```java
package com.example.cardatabase.domain;

import com.fasterxml.jackson.annotation.JsonIgnore;
import com.fasterxml.jackson.annotation.JsonIgnoreProperties;
import jakarta.persistence.*;
import lombok.*;

import java.util.List;

@Entity
@JsonIgnoreProperties({"hibernateLazyInitializer", "handler"})
@Getter
@Setter
@ToString
@NoArgsConstructor(force = true)
@RequiredArgsConstructor
public class Owner {
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long ownerId;

    @NonNull
    private final String firstName;
    @NonNull
    private final String lastName;

    // ì†Œìœ ìëŠ” ë‹¤ìˆ˜ì˜ ì°¨ë“¤ì„ ê°€ì§ˆ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— Collectionsë¥¼ ì‚¬ìš©
    @JsonIgnore
    @OneToMany(cascade = CascadeType.ALL, mappedBy = "owner")
    private List<Car> cars;
} 
```
- ì°¸ì¡°
    - `@JsonIgnoreProperties({"hibernateLazyInitilizer", "handler"})`

    - `@JsonIgnoreProperties(valueê°’)` : JSON ì¶œë ¥ ì‹œì— ì§€ì •ëœ ì†ì„± ë¬´ì‹œ
    - `@JsonIgnoreProperties({"ì†ì„±1", "ì†ì„±2"})` : JSON ì¶œë ¥ ì‹œì— ì§€ì •ëœ ì†ì„± ë¬´ì‹œ

    - JSON ì§ë ¬í™” / ì—­ì§ë ¬í™” ê³¼ì •ì—ì„œ íŠ¹ì • ì†ì„±ì„ ë¬´ì‹œí•˜ë„ë¡ í•˜ëŠ” Jackson ë¼ì´ë¸ŒëŸ¬ë¦¬ ìƒì˜ ì—ë„ˆí…Œì´ì…˜ì— í•´ë‹¹í•©ë‹ˆë‹¤.

    - hibernateLazyInitilizer
    - handler
        - JPA í”„ë¡ì‹œ ê°ì²´ì—ì„œ ë°œìƒí•˜ê²Œ ë˜ëŠ” íŠ¹ìˆ˜í•œ í•„ë“œ ì¤‘ì— ì´ìƒì˜ ë‘ ì†ì„±ì€ JPAê°€ ì§€ì—° ë¡œë”©(Lazy Loading)ì„ ìœ„í•´ì„œ ìƒì„±í•˜ëŠ” ë‚´ë¶€ í•„ë“œì¸ë°, ì–˜ë„¤ê°€ JSONì— í¬í•¨ë˜ê²Œ ë˜ë©´ ì˜¤ë¥˜ê°€ ë°œìƒí•  ìˆ˜ ìˆì–´ì„œ default ê°’ìœ¼ë¡œ ì œì™¸ì‹œí‚¤ëŠ” ìš©ë„ì…ë‹ˆë‹¤.

    - ê²°ê³¼ì ìœ¼ë¡œ `@JsonIgnoreProperties`ëŠ” ì´ìƒì˜ ë‘ í•„ë“œë¥¼ ì œì™¸ì‹œí‚¤ê¸° ìœ„í•¨ì´ê³ ,
    - `@JsonIgnore`ì´ field ë ˆë²¨ì—ì„œ JSON ì§ë ¬í™”ë¥¼ ë§‰ëŠ” ì—ë„ˆí…Œì´ì…˜ì´ë¼ê³  í•´ì„í•  ìˆ˜ ìˆê² ìŠµë‹ˆë‹¤.

## Spring Data REST ì´ìš©.
- Spring Data RESTëŠ” ìŠ¤í”„ë§ ë°ì´í„° í”„ë¡œì íŠ¸ì˜ ì¼ë¶€ë¡œ, ìŠ¤í”„ë§ìœ¼ë¡œ RESTful ì›¹ ì„œë¹„ìŠ¤ë¥¼ ë¹ ë¥´ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ëŠ” ì˜ì¡´ì„±. Spring Data RESTëŠ” í´ë¼ì´ì–¸íŠ¸ê°€ í•˜ì´í¼ë¯¸ë””ì–´ ë§í¬ë¥¼ ì´ìš©í•˜ì—¬ REST APIë¥¼ ë™ì ìœ¼ë¡œ íƒìƒ‰í•  ìˆ˜ ìˆê²Œ í•˜ëŠ” ì•„í‚¤í…ì²˜ ì›ì¹™ì¸ HATEOASë¥¼ ì§€ì›í•´ì¤ë‹ˆë‹¤.(ì¦‰, ê²°ê³¼ê°’ì— ë§í¬ë¥¼ ê±¸ì–´ì£¼ëŠ”ë°, ì˜ˆì‹œëŠ” ë³´ì—¬ë“œë¦´ê²ë‹ˆë‹¤) ë˜í•œ, API ì—”ë“œí¬ì¸íŠ¸ì˜ ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ì„ ì‚¬ìš©ì ì •ì˜í•˜ëŠ” ë° ì´ìš©í•  ìˆ˜ ìˆëŠ” ì´ë²¤íŠ¸ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

1. build.gradleì— ì˜ì¡´ì„±ì„ ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤.
2. application.propertiesì—ì„œ Spring Data RESTì™€ ê´€ë ¨ìˆëŠ” í•­ëª©ë“¤ì˜ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    - Spring Data RESTëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ëª¨ë“  ê³µìš© ë¦¬í¬ì§€í† ë¦¬ë¥¼ ì°¾ê³ , ì—”í‹°í‹°ë¥¼ ìœ„í•œ RESTful ì›¹ ì„œë¹„ìŠ¤ë¥¼ ìë™ìœ¼ë¡œ ìƒì„±í•©ë‹ˆë‹¤. í˜„ì¬ ì €í¬ëŠ” CarRepository / OwnerRepositoryê°€ ìˆìœ¼ë©°, í˜„ì¬ëŠ” ì—¬ê¸°ì— ëŒ€í•œ ì›¹ ì„œë¹„ìŠ¤ë¥¼ ìƒì„±í•˜ê²Œ ë ê²ë‹ˆë‹¤.

ì´ìƒì˜ ë¶€ë¶„ì„ ìˆ˜ì •í•˜ê²Œ ë˜ë©´
localhost:8080/api ì•¤ë“œí¬ì¸íŠ¸ë¡œ ì ‘ì†í•˜ê²Œ ë˜ì—ˆì„ ë•Œ, RESTful ì›¹ ì„œë¹„ìŠ¤ì— ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  ë‚´ë¶€ì˜ JSONì˜ valueê°’ë“¤ì„ ë³´ë©´ ì „ë¶€ ë‹¤ íŠ¹ì •í•œ ë§í¬ë¡œ ì‘ì„±ë˜ì–´ìˆë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” Spring Data RESTê°€ ì§€ì›í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ. JSON ë°ì´í„°ë¥¼ HAL(Hypertext Application Language)í˜•íƒœë¡œ ë°˜í™˜í•©ë‹ˆë‹¤. HAL í˜•ì‹ì€ í•˜ì´í¼ë§í¬ë¥¼ JSONìœ¼ë¡œ í‘œí˜„í•˜ëŠ” ê·œì¹™ì„ ì •ì˜í•˜ì—¬ í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œìê°€ RESTful ì›¹ ì„œë¹„ìŠ¤ë¥¼ ë” ì‰½ê²Œ ê°œë°œí•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤ë‹ˆë‹¤.

```java
{
  "_embedded" : {
    "owners" : [ {
      "firstName" : "ì¼",
      "lastName" : "ê¹€",
      "_links" : {
        "self" : {
          "href" : "http://localhost:8080/api/owners/1"
        },
        "owner" : {
          "href" : "http://localhost:8080/api/owners/1"
        },
        "cars" : {
          "href" : "http://localhost:8080/api/owners/1/cars"
        }
      }
    }, {
      "firstName" : "ì´",
      "lastName" : "ê¹€",
      "_links" : {
        "self" : {
          "href" : "http://localhost:8080/api/owners/2"
        },
        "owner" : {
          "href" : "http://localhost:8080/api/owners/2"
        },
        "cars" : {
          "href" : "http://localhost:8080/api/owners/2/cars"
        }
      }
    } ]
  },
  "_links" : {
    "self" : {
      "href" : "http://localhost:8080/api/owners?page=0&size=20"
    },
    "profile" : {
      "href" : "http://localhost:8080/api/profile/owners"
    }
  },
  "page" : {
    "size" : 20,
    "totalElements" : 2,
    "totalPages" : 1,
    "number" : 0
  }
}
```

ì´ìƒê³¼ ê°™ì€ í˜•íƒœì˜ CarRepositoryë¥¼ íƒìƒ‰í•´ì„œ 1, 2, 3 ë²ˆ ì°¨ì— ëŒ€í•œ ì •ë³´ë¥¼ / OwnerRepositoryë¥¼ íƒìƒ‰í•´ì„œ 1, 2 ë²ˆ ì†Œìœ ì£¼ì— ê´€í•œ ì •ë³´ë¥¼ ê°€ì§€ê³  ìˆìŒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Spring Data RESTì˜ ì„œë¹„ìŠ¤ ê²½ë¡œ ì´ë¦„ì€ Entity ì´ë¦„ì—ì„œ íŒŒìƒë˜ì–´ _ë³µìˆ˜í˜•ìœ¼ë¡œ ë°”ë€ í›„ ì†Œë¬¸ìë¡œ ë³€ê²½_ ë©ë‹ˆë‹¤. ì¦‰, ì§€ê°€ ì•Œì•„ì„œ Carë¥¼ ë³´ê³  carsë¡œ ìˆ˜ì •í•˜ì—¬ ì—”ë“œí¬ì¸íŠ¸(ì£¼ì†Œ)ì— ê°–ë‹¤ ë¶™ì¸ê²ë‹ˆë‹¤.
ê·¸ë˜ì„œ ë§Œì•½ì— ë‹¤ë¥¸ ì´ë¦„ìœ¼ë¡œ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì§€ì •í•˜ê³  ì‹¶ë‹¤ë©´ `@RepositoryRestResource`ë¥¼ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ ë°”ê¿€ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```java
@RepositoryRestResource(path="vehicles")
public interface CarRepository extends JpaRepository<Car, Long> {}
```

í˜„ì¬ëŠ” ê·¸ëƒ¥ /api ì—”ë“œí¬ì¸íŠ¸ë¡œ ë“¤ì–´ê°€ì„œ table ë“¤ì— ìˆëŠ” rowì˜ ê°’ë“¤ì„ ë³´ëŠ”ê²ƒ ë°–ì— ëª»í•˜ê³  ìˆëŠ” ìƒí™©ã…‡ë¹„ë‹ˆë‹¤. ê·¸ë¦¬ê³  /apië¥¼ ë–¼ê²Œ ë˜ë©´ CarControllerì— ë”¸ë ¤ìˆëŠ” `@GetMapping`ë§Œ ì ìš©ê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì— ì°¨ëŸ‰ ëª©ë¡ì„ ì¡°íšŒí•˜ëŠ” ê²ƒ ë°–ì— ëª»í•©ë‹ˆë‹¤.

í•˜ì§€ë§Œ Spring Data RESTë¥¼ ì‚¬ìš©í•˜ë©´ ë‚˜ë¨¸ì§€ CRUDì™€ ê´€ë ¨ëœ ê²ƒë“¤ì´ ìë™ìœ¼ë¡œ ìƒì„±ëœë‹¤ê³  í–ˆëŠ”ë°, ì½”ë“œë¼ì¸ì´ ìˆëŠ” ê²ƒë„ ì•„ë‹ˆê³  ì‹¤ì œë¡œ ì½ì–´ì„œëŠ” í™•ì¸í•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— Postmanì´ë¼ëŠ” í”„ë¡œê·¸ë¨ì„ í™œìš©í•˜ì—¬ ì‹¤ì œë¡œ ë‚˜ë¨¸ì§€ POST / GET / DELETE ê´€ë ¨ ë©”ì„œë“œë“¤ì„ ì‚¬ìš©í•´ë³´ë„ë¡ í•˜ê² ìŠµã„´ë””ã….

ì›¹ ê°œë°œ ìˆ˜ì—… ë•Œë¬¸ì— Postmanì´ ê¹”ë ¤ìˆëŠ” ìë¦¬ê°€ ìˆì„ ìˆ˜ ìˆìœ¼ë¯€ë¡œ ì „ì²´ ì‚­ì œ ë° ì¬ì„¤ì¹˜ ê³¼ì •ì„ ê±°ì¹ ê²ë‹ˆë‹¤.
window + postman

postman ì„¤ì¹˜ ì´í›„ì— ì¢Œì¸¡ì˜ My Collectionsë¥¼ í´ë¦­í•˜ì‹œë©´ GET New Request í˜¹ì€ GET GetData ì™€ ê°™ì€ í˜•íƒœë¡œ ë‚˜ì™€ìˆìŠµë‹ˆë‹¤.
ê·¸ê±° í•˜ë‚˜ í´ë¦­ í•˜ì‹œì˜¤ URL ì ëŠ” ë¶€ë¶„ì—
localhost:8080/api/cars

í•˜ë‹ˆê¹Œ í˜„ì¬ê¹Œì§€ DBì— ë“¤ì–´ê°€ìˆëŠ” ìë™ì°¨ ëª©ë¡ì´ ë‚˜ì™”ì—ˆìŠµë‹ˆë‹¤.

ê·¸ë¦¬ê³  POST ìš”ì²­ìœ¼ë¡œ localhost:8080/api/cars ë¥¼ í–ˆì„ ë•Œ, raw / JSON í˜•ì‹ìœ¼ë¡œ
```json
{
    "brand":"Toyota",
    "model":"Corolla",
    "color":"Silver",
    "registrationNumber":"BBA-3122",
    "modelyear":2023,
    "price":38000
}
```
ë¥¼ ì…ë ¥í–ˆë”ë‹ˆ 201 Createdê°€ ëœ¨ë©´ì„œ GET localhost:8080/api/cars ì„ í•˜ë‹ˆê¹Œ ìë™ì°¨ í•œëŒ€ê°€ ì¶”ê°€ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆê³ , ë˜í•œ HeidiSQLì—ì„œ `SELECT * FROM car;`ë¥¼ í–ˆì„ ë•Œì—ë„ í™•ì¸ì´ ê°€ëŠ¥í–ˆìŠµë‹ˆë‹¤. ì¦‰, Java Springbootì˜ CommandLineRunnerë¥¼ í†µí•´ ì…ë ¥í•œ ë”ë¯¸ ë°ì´í„°ì™€, SQL ìƒìœ¼ë¡œ Insert ë¬¸ì„ í†µí•´ ì…ë ¥í•œ ë°ì´í„°ì™€, postmanì„ í†µí•´ ì…ë ¥í•œ ë°ì´í„°ë“¤ì„ ì „ë¶€ ë‹¤ ê°ê°ì˜ ì¥ì†Œì—ì„œ í™•ì¸ì´ ê°€ëŠ¥í•˜ë‹¤ëŠ” ì ì—ì„œ Springboot / Mariadb / postmanì´ ì„œë¡œ ì—°ê²°ë˜ì–´ìˆìŒì„ ì•Œ ìˆ˜ ìˆê² ìŠµë‹ˆë‹¤.

ê·¸ëŸ¼ ì—¬ê¸°ì— ì¶”ê°€ ë¿ë§Œ ì•„ë‹ˆë¼ ìˆ˜ì • / ì‚­ì œ ì‚¬í•­ ë˜í•œ ì„œë¡œì„œë¡œ ë°˜ì˜ë  ê²ƒì´ë¼ê³  ì˜ˆì¸¡í•  ìˆ˜ ìˆê² ìŠµë‹ˆë‹¤.
ìˆ˜ì • ë¶€ë¶„ì€
ë°©ê¸ˆ ì¶”ê°€í•œ ìë™ì°¨ê°€ 5 ë²ˆ ì•„ì´ë””ë¥¼ ê°€ì§€ê³  ìˆì—ˆìœ¼ë¯€ë¡œ
PATCH localhost:8080/api/cars/5 ë¥¼ í†µí•´ ìˆ˜ì •í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.
```json
{"color":"white"}
```
ë¥¼ í•˜ê³  GET localhost:8080/api/cars/5 ë¥¼ í–ˆë”ë‹ˆ ìˆ˜ì •ë„ë‹ˆ ìƒ‰ê¹”ë¡œ ì¡°íšŒê°€ ê°€ëŠ¥í–ˆìŠµë‹ˆë‹¤.
ë¬¼ë¡  SQLì—ì„œë„ í™•ì¸ê°€ëŠ¥í•©ë‹ˆë‹¤.

POST / PATCH / PUTì€ postman ìƒì—ì„œ headersì˜ Content-Type í—¤ë”ê°€ application/json ìœ¼ë¡œ ì„¤ì •ë˜ì–´ìˆì–´ì•¼ í•©ë‹ˆë‹¤.

- PATCH vs. PUT
    1. PATCH : ìˆ˜ì •í•  ë¶€ë¶„ì˜ key - value propertyë§Œ ì‘ì„±í•´ë„ ë©ë‹ˆë‹¤.
    2. PUT : ìˆ˜ì •í•  ë¶€ë¶„ì´ í•˜ë‚˜ë¼ë„ ì „ì²´ key - value propertiesë¥¼ ì „ë¶€ ë‹¤ ì…ë ¥í•´ì¤˜ì•¼ í•©ë‹ˆë‹¤.

ê·¸ë˜ì„œ ì°¨ë¼ì•¼ ìƒ‰ìƒì„ Silver `->` Whiteë¡œ ë°”ê¿”ì£¼ì—ˆìŠµë‹ˆë‹¤
ì—¬ê¸°ì— owner1ì„ ì†Œìœ ì£¼ë¡œ ë“±ë¡í•˜ê³ ì í•©ë‹ˆë‹¤

```json
{
    "brand": "Toyota",
    "model": "Corolla",
    "color": "Silver",
    "registrationNumber": "BBA-3122",
    "modelYear": 2023,
    "price": 38000,
    "_links": {
        "self": {
            "href": "http://localhost:8080/api/cars/8"
        },
        "car": {
            "href": "http://localhost:8080/api/cars/8"
        },
        "owner": {
            "href": "http://localhost:8080/api/cars/8/owner"
        }
    }
}
```
ê³¼ ê°™ì´ ë‚˜ì˜¤ëŠ”ë°, "_link"ì˜ valueì¸ "owner"ì˜ "href"ì˜ valueëŠ” "http://localhost:8080/api/cars/8/owner"ì´ì§€ë§Œ, ë¸Œë¼ìš°ì €ì—ì„œ ì´ë¥¼ í™•ì¸í•˜ë©´ ì ‘ê·¼ì´ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤. HeidiSQLì—ì„œ ë³´ëŠ” ê²ƒì²˜ëŸ¼ NULLê°’ì´ ë“¤ì–´ê°€ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

ê·¸ëŸ¬ë©´ ì´ì œ 8 ë²ˆ ì•„ì´ë”” ì°¨ëŸ‰ì˜ ì†Œìœ ì£¼ë¥¼ 1ë²ˆìœ¼ë¡œ ë“±ë¡í•˜ê³  ì‹¶ë‹¤ë©´ owner ë¶€ë¶„ë§Œ ê³ ì¹˜ë©´ ë˜ê¸° ë•Œë¬¸ì— PATCH ìš”ì²­ì„ í†µí•´ì„œ ì²˜ë¦¬í•  ìˆ˜ ìˆê² ë„¤ìš”

í•˜ì§€ë§Œ HATEOASë¥¼ ì ìš©í•˜ê²Œ ë˜ë©´ ìë™ìœ¼ë¡œ hrefë“¤ì´ ìƒì„±ë˜ê²Œ ë˜ë©´ì„œ PUT ìš”ì²­ì„ í†µí•´ì„œ  8 ë²ˆ ì°¨ëŸ‰ì˜ ì†Œìœ ì£¼ë¥¼ 1 ë²ˆ ownerë¡œ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

1. PUT  ìš”ì²­ìœ¼ë¡œ URL : localhost:8080/api/cars/8/owner
2. ì£¼ì˜ ì‚¬í•­ìœ¼ë¡œ Headers ë¶€ë¶„ì— Content-Typeì˜ value ê°’ì´ text í˜¹ì€ text/plainìœ¼ë¡œ ë˜ì–´ìˆìŠµë‹ˆë‹¤. ì´ ë¶€ë¶„ì„ í•´ì œí•˜ì‹œê³ , ìƒˆë¡œ Content-Typeì„ ì¶”ê°€í•˜ê³ , valueë¡œ text/uri-listë¡œ ë°”ê¾¸ì…”ì•¼ í•©ë‹ˆë‹¤.

3. ê·¸ëŸ°ë° ì´ ë¶€ë¶„ì´ í•´ê²°ë˜ê³  ë‚˜ë©´ ë…¹ìƒ‰ìœ¼ë¡œ 204ë¼ê³  ëœ¨ê¸°ëŠ” í•˜ëŠ”ë° No Contentë¼ê³  ëœ¹ë‹ˆë‹¤
4. ì»´í“¨í„°ëŠ” ìƒê°ë³´ë‹¤ ë©ì²­í•˜ë‹¤ -> PUT ìš”ì²­ì´ ëë‚¬ìœ¼ë‹ˆê¹Œ ê·¸ëƒ¥ ë³€ê²½í–ˆë‹¤ê³  í•˜ê³  ëë‚¸ê²ë‹ˆë‹¤. ìš°ë¦¬ëŠ” ë³€ê²½ ëœê²ƒì„ í™•ì¸í•˜ê¸° ìœ„í•´ì„œëŠ” ë‹¤ì‹œ GET localhost:8080/api/cars/5ë¡œ ë“¤ì–´ê°€ì•¼ ì œëŒ€ë¡œ ë˜ì—ˆëŠ”ì§€ í™•ì¸ í•  ìˆ˜ ìˆì„ ê²ë‹ˆë‹¤. í˜¹ì€ localhost:8080/api/cars/5/ownerë¡œ ë“¤ì–´ê°€ë©´ 1ë²ˆ ì•„ì´ë””ë¥¼ ê°€ì§„ ì†Œìœ ì£¼ì¸ì§€ ì•Œ ìˆ˜ ìˆê² ë„¤ìš”.

### ì„œë¹„ìŠ¤ì— ì¿¼ë¦¬ë¥¼ ì¶”ê°€í•˜ëŠ” ë°©ì‹
ë¦¬í¬ì§€í† ë¦¬ì— ëŒ€í•œ ì¿¼ë¦¬ë¥¼ ì‘ì„±í•´ë´¤ì—ˆìŠµë‹ˆë‹¤. .findByBrand(String brand) ê°™ì€ ì‹ìœ¼ë¡œìš”. ì„œë¹„ìŠ¤ì— ì´ëŸ¬í•œ ì¿¼ë¦¬ë¥¼ í¬í•¨í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥í•©ë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ì„œëŠ” ì•„ê¹Œ ì „ì— endpoint ê²½ë¡œ ë°”ê¿€ ë•Œ ì¨ë¨¹ì—ˆë˜ `@RepositoryRestResource` ë¼ëŠ” ì• ë„ˆí…Œì´ì…˜ì„ ì‚¬ìš©í•  ìˆ˜ ìˆì„ê²ë‹ˆë‹¤.

```java
@RepositoryRestController
public interface CarRepository extends JpaRepository<Car, Long> {
    List<Car> findByBrand(@Param("brand") String brand);

    List<Car> findByColor(@Param("color") String color);
}
```
ì´ë ‡ê²Œ ì •ì˜ë¥¼ í•´ë†“ê³  ë‚˜ì„œ postmanì—ì„œ GET localhost:8080/api/carsë¡œ ë“¤ì–´ê°€ê²Œ ë˜ë©´, ì œì¼ ë°‘ì— _link ë‚´ì— "search"ë¼ëŠ” keyê°€ ì¶”ê°€ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ê·¸ë¦¬ê³  localhost:8080/api/cars/searchë¡œ ë“¤ì–´ê°€ê²Œ ë˜ë©´, ì €í¬ê°€ ì •ì˜í•œ findByBrand()ì™€, findByBrand

```json
{
    "_links": {
        "findByBrand": {
            "href": "http://localhost:8080/api/cars/search/findByBrand{?brand}",
            "templated": true
        },
        "findByColor": {
            "href": "http://localhost:8080/api/cars/search/findByColor{?color}",
            "templated": true
        },
        "self": {
            "href": "http://localhost:8080/api/cars/search"
        }
    }
}
```
ê·¸ë˜ì„œ findByBrandì˜ ê²½ìš°ì— 
http://localhost:8080/api/cars/search/findByBrand?brand=Kia
ì´ëŸ°ì‹ìœ¼ë¡œ urlì„ ì…ë ¥í•˜ê³  í¬ë¡¬ì—ì„œ í™•ì¸í•˜ì‹œë©´ Kia ë¼ëŠ” ë¸Œëœë“œ valueë¥¼ ê°€ì§€ê³  ìˆëŠ” ê²°ê³¼ê°’ë§Œ JSONìœ¼ë¡œ ì •ë¦¬ë˜ì–´ì„œ íŠ€ì–´ë‚˜ì˜µë‹ˆë‹¤.
```json
{
  "_embedded" : {
    "cars" : [ {
      "brand" : "Kia",
      "model" : "Seltos",
      "color" : "Chacol",
      "registrationNumber" : "370SU5690",
      "modelYear" : 2020,
      "price" : 30000000,
      "_links" : {
        "self" : {
          "href" : "http://localhost:8080/api/cars/1"
        },
        "car" : {
          "href" : "http://localhost:8080/api/cars/1"
        },
        "owner" : {
          "href" : "http://localhost:8080/api/cars/1/owner"
        }
      }
    } ]
  },
  "_links" : {
    "self" : {
      "href" : "http://localhost:8080/api/cars/search/findByBrand?brand=Kia"
    }
  }
}
```
# ê¸ˆì¼ ì •ë¦¬ ë¶€ë¶„
1. RESTful API
2. Entity - Repositoryì˜ ê´€ë ¨ì„ í†µí•œ
    1. H2 In memory ìƒí™©ì—ì„œ
    2. MariaDB ì´ì‹ ë°©ë²•
3. postman ì‚¬ìš© ë°©ë²• - REST ê´€ë ¨
4. Spring-Data-RESTì™€ ê´€ë ¨ëœ ê³µë¶€
    - ì‚¬ìš©í–ˆì„ ë•Œ ì–´ëŠ ë¶€ë¶„ì´ ì´ì ì´ ìˆëŠ”ì§€
    - ë§Œì•½ì— ì‚¬ìš©í•˜ì§€ ì•Šê³  í†µì§œë¡œ ì½”ë“œë¥¼ ì§ ë‹¤ë©´ ì–´ë–»ê²Œ í•´ì•¼ í•˜ëŠ”ì§€